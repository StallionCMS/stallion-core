{% extends "stallion:semipublic/semipublic-single-box-page.jinja" %}
{% block main_column %}

<style>
    #st-login-form input[type="password"], #st-login-form input[type="name"], #st-login-form input[type="email"] { width: 100%; }
</style>
<div id="layout" class="pure-g">
    {% if not tokenVerified %}
    <div class="pad pure-u-1">
        {% if verifyError %}
        <div class="st-error" role="alert">Password reset token for email {{ email }} was not valid.</div>
        {% endif %}
        <h1 class="st-splash-header">Reset your password</h1>
        <div id="reset-sent-box" style="display:none;margin-top: 1em;" class="st-success spaced">Password reset email sent. You should receive it within a few minutes.</div>
        <form id="st-reset-password-form" class="st-form pure-form pure-form-stacked">
            <fieldset>
                <div class="st-bottom-space">
                    <label>Email/Username</label>
                    <input type="email" name="email" placeholder="Email">
                </div>
                <div class="st-bottom-space">
                    <button type="submit" class="st-button-submit pure-button pure-button-primary">Send password reset email</button>
                </div>
            </fieldset>
        </form>
    </div>
    {% endif %}
    {% if tokenVerified %}
    <div id="choose-new-password-box"  class="pad pure-u-1">
        <h1 class="st-splash-header">Choose new password</h1>
        <form id="st-choose-new-password-form" class="st-form pure-form pure-form-stacked">
            <fieldset>
                <div class="st-bottom-space">
                    <label>Email/Username</label>
                    <input type="email" name="email" placeholder="Email or username" value="{{ email }}" readonly="readonly">
                </div>
                <div class="st-bottom-space">
                    <label>New password</label>
                    <input type="password" name="password" autofocus="autofocus">
                </div>
                <div class="st-bottom-space">
                    <label for="email">Username/Email</label>
                    <input type="password" name="passwordConfirm">
                </div>

                <div class="st-bottom-space">
                    <button type="submit" class="st-button-submit pure-button pure-button-primary">Save new password</button>
                </div>
            </fieldset>
        </form>
    </div>
    {% endif %}
</div><!-- pure-g -->
{% endblock %}

{% block pre_end_body %}
<script src='{{ assets.resource("admin/screens/login-screen.js", "stallion") }}' type="text/javascript"></script>
{% endblock %}
